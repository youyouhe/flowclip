# YouTube Slicer éƒ¨ç½²æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

ä½¿ç”¨éƒ¨ç½²è„šæœ¬è‡ªåŠ¨å®Œæˆæ‰€æœ‰é…ç½®ï¼š

```bash
# å• IP ç¯å¢ƒï¼ˆè‡ªåŠ¨æ£€æµ‹å†…ç½‘ IPï¼‰
./deploy.sh 8.213.226.34

# æˆ–è€…æŒ‡å®šå†…ç½‘ IP
./deploy.sh 8.213.226.34 172.16.0.10
```

### 2. éªŒè¯éƒ¨ç½²

è¿è¡Œé…ç½®éªŒè¯è„šæœ¬æ£€æŸ¥éƒ¨ç½²çŠ¶æ€ï¼š

```bash
./verify-config.sh
```

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### å¿…éœ€è½¯ä»¶
- **Docker**: >= 20.10
- **Docker Compose**: >= 1.29
- **Git**: ç”¨äºä»£ç æ‹‰å–

### æ¨èé…ç½®
- **CPU**: 2æ ¸å¿ƒä»¥ä¸Š
- **å†…å­˜**: 4GBä»¥ä¸Š
- **å­˜å‚¨**: 20GBä»¥ä¸Šå¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

## ğŸ”§ éƒ¨ç½²è„šæœ¬è¯¦è§£

### deploy.sh åŠŸèƒ½

1. **ç¯å¢ƒæ£€æµ‹**
   - è‡ªåŠ¨æ£€æµ‹å†…ç½‘ IP
   - éªŒè¯ Docker ç¯å¢ƒ
   - æ£€æŸ¥å¿…è¦å·¥å…·

2. **é…ç½®ç”Ÿæˆ**
   - åˆ›å»º `.env` æ–‡ä»¶
   - æ›´æ–° `docker-compose.yml`
   - é…ç½®åŒç«¯ç‚¹ MinIO

3. **æœåŠ¡éƒ¨ç½²**
   - æ‹‰å–æœ€æ–°ä»£ç 
   - æ„å»ºå®¹å™¨é•œåƒ
   - å¯åŠ¨æ‰€æœ‰æœåŠ¡

4. **éƒ¨ç½²éªŒè¯**
   - æ˜¾ç¤ºè®¿é—®åœ°å€
   - æä¾›ç®¡ç†å‘½ä»¤
   - è¾“å‡ºç³»ç»ŸçŠ¶æ€

### ç”Ÿæˆçš„é…ç½®

#### .env æ–‡ä»¶
```bash
# æœåŠ¡å™¨é…ç½®
PUBLIC_IP=8.213.226.34
PRIVATE_IP=172.16.0.10

# Docker å†…éƒ¨é€šä¿¡
FRONTEND_URL=http://frontend:3000
API_URL=http://backend:8001

# æ•°æ®åº“é…ç½®
DATABASE_URL=mysql+aiomysql://youtube_user:youtube_password@mysql:3306/youtube_slicer?charset=utf8mb4

# MinIO åŒç«¯ç‚¹é…ç½®
MINIO_ENDPOINT=minio:9000
MINIO_PUBLIC_ENDPOINT=http://8.213.226.34:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_NAME=youtube-videos
```

#### docker-compose.yml ç‰¹æ€§
- **æœåŠ¡å‘ç°**: ä½¿ç”¨å®¹å™¨åç§°è¿›è¡Œå†…éƒ¨é€šä¿¡
- **ç½‘ç»œéš”ç¦»**: ç‹¬ç«‹çš„ Docker ç½‘ç»œ
- **æ•°æ®æŒä¹…åŒ–**: è‡ªåŠ¨ç®¡ç†æ•°æ®å·
- **å¥åº·æ£€æŸ¥**: è‡ªåŠ¨æœåŠ¡ç›‘æ§

## ğŸŒ è®¿é—®åœ°å€

### å¤–éƒ¨è®¿é—®ï¼ˆç”¨æˆ·ï¼‰
- **å‰ç«¯**: http://[PUBLIC_IP]:3000
- **API**: http://[PUBLIC_IP]:8001
- **API æ–‡æ¡£**: http://[PUBLIC_IP]:8001/docs
- **MinIO æ§åˆ¶å°**: http://[PUBLIC_IP]:9001

### å†…éƒ¨é€šä¿¡ï¼ˆDockerï¼‰
- **Frontend**: http://frontend:3000
- **Backend**: http://backend:8001
- **MinIO**: http://minio:9000
- **MySQL**: mysql:3306
- **Redis**: redis:6379

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User Browser   â”‚â”€â”€â”€â–¶â”‚   Frontend      â”‚â”€â”€â”€â”€â”‚   Backend       â”‚
â”‚   (å¤–éƒ¨è®¿é—®)      â”‚    â”‚   (React)       â”‚    â”‚   (FastAPI)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â–¼                       â–¼
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚   MinIO Public  â”‚    â”‚   MinIO Internalâ”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   (æ–‡ä»¶ä¸‹è½½)     â”‚â—€â”€â”€â”€â”‚   (å­˜å‚¨ç®¡ç†)     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹çŠ¶æ€
```bash
docker-compose ps                    # æœåŠ¡çŠ¶æ€
docker-compose logs -f               # å®æ—¶æ—¥å¿—
docker-compose logs backend          # åç«¯æ—¥å¿—
docker-compose logs frontend         # å‰ç«¯æ—¥å¿—
```

### æœåŠ¡ç®¡ç†
```bash
docker-compose up -d --build        # é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose restart               # é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose down                  # åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down -v               # åœæ­¢å¹¶åˆ é™¤æ•°æ®
```

### æ•°æ®ç®¡ç†
```bash
# æŸ¥çœ‹ MySQL
docker exec -it youtube-slicer-mysql mysql -u youtube_user -pyoutube_password youtube_slicer

# æŸ¥çœ‹ Redis
docker exec -it youtube-slicer-redis redis-cli

# æŸ¥çœ‹ MinIO
docker exec -it youtube-slicer-minio mc ls local/youtube-videos
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **CORS é”™è¯¯**
   - æ£€æŸ¥ `.env` ä¸­çš„ IP é…ç½®
   - é‡æ–°è¿è¡Œéƒ¨ç½²è„šæœ¬
   - æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

2. **WebSocket è¿æ¥å¤±è´¥**
   - ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
   - éªŒè¯ç½‘ç»œè¿æ¥

3. **MinIO ä¸‹è½½å¤±è´¥**
   - æ£€æŸ¥ `MINIO_PUBLIC_ENDPOINT` é…ç½®
   - ç¡®è®¤ç«¯å£ 9000 å·²å¼€æ”¾
   - éªŒè¯ MinIO æœåŠ¡çŠ¶æ€

4. **æ•°æ®åº“è¿æ¥é”™è¯¯**
   - ç­‰å¾… MySQL å®Œå…¨å¯åŠ¨
   - æ£€æŸ¥æ•°æ®åº“é…ç½®
   - æŸ¥çœ‹å®¹å™¨æ—¥å¿—

### æ—¥å¿—åˆ†æ
```bash
# æŸ¥çœ‹ç‰¹å®šæœåŠ¡é”™è¯¯
docker-compose logs backend | grep ERROR
docker-compose logs celery | grep ERROR

# æŸ¥çœ‹æœ€è¿‘æ—¥å¿—
docker-compose logs --tail=50 backend
```

### æ€§èƒ½ä¼˜åŒ–
```bash
# æ‰©å±• Celery å·¥ä½œè¿›ç¨‹
docker-compose up -d --scale celery-worker=3

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -f
```

## ğŸ”„ æ›´æ–°æµç¨‹

### ä»£ç æ›´æ–°
```bash
git pull origin main
./deploy.sh <public-ip>
```

### é…ç½®æ›´æ–°
```bash
# ä¿®æ”¹ .env æ–‡ä»¶åé‡å¯
docker-compose restart
```

### ç‰ˆæœ¬å›æ»š
```bash
git checkout <tag>
./deploy.sh <public-ip>
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š

1. **è¿è¡ŒéªŒè¯è„šæœ¬**ï¼š`./verify-config.sh`
2. **æ£€æŸ¥æœåŠ¡æ—¥å¿—**ï¼š`docker-compose logs -f`
3. **æŸ¥çœ‹æœ¬æ–‡æ¡£**ï¼šæ•…éšœæ’é™¤éƒ¨åˆ†
4. **æäº¤ Issue**ï¼šåœ¨ GitHub ä»“åº“ä¸­åˆ›å»ºé—®é¢˜

## ğŸ“ å¼€å‘ç¯å¢ƒ

å¦‚éœ€æœ¬åœ°å¼€å‘ï¼Œè¯·å‚è€ƒå¼€å‘æ–‡æ¡£ï¼š
- [å¼€å‘æŒ‡å—](./DEVELOPMENT.md)
- [API æ–‡æ¡£](./backend/docs/)
- [å‰ç«¯å¼€å‘](./frontend/README.md)